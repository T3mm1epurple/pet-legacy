local DiscordLib = loadstring(game:HttpGet"https://raw.githubusercontent.com/dawid-scripts/UI-Libs/main/discord%20lib.txt")()

local win = DiscordLib:Window("pet legacy autofarm")

local serv = win:Server("Main", "")

local mappl
local autofarm
local normauto
local automethod
local petattack = false
local capsule = false
local waitamo = 0
local capcount = 10
local capname
local petrar
local capamount = 1
local enemy = nil
local model = nil
local tgls = serv:Channel("Auto-Farm")

local drop = tgls:Dropdown("Auto-Farm Place",{"Desert","Forest","Cavern","Beach","Jungle"}, function(places)
print(places)
mappl = places
print(mappl)
end)

local drop = tgls:Dropdown("Auto-Farm Method",{"Very Fast"}, function(places)
print(places)
automethod = places
end)

tgls:Label("the less the faster for below")

local sldr = tgls:Slider("wait after enemy death", 0, 5, 0, function(t)
print(t)
waitamo = t
end)

tgls:Toggle("Auto-Farm",false, function(toggle)
print(toggle)
petattack = false
enemy = nil
model = nil
autofarm = false
normauto = false
if automethod == "Very Fast" then
autofarm = toggle
print(autofarm)
end
if automethod == "Normal" then
normauto = toggle
print(normauto)
end
end)

local cap = serv:Channel("Capsules")

local drop = cap:Dropdown("Capsule (use for autobuy too)",{"Basic","Pro","Mythic","Alpha"}, function(places)
print(places)
capname = places
print(capname)
end)

local drop = cap:Dropdown("Pet Rarity",{"Basic","Rare","Epic","Legendary", "Mythical", "All"}, function(places)
print(places)
petrar = places
print(capname)
end)

cap:Toggle("Auto Capture (has infinite inv)",false, function(newthing)
print(newthing)
capsule = newthing
end)

local sldr = cap:Slider("Capsule Amount", 0, 25, 1, function(t)
print(t)
capamount = t
end)

cap:Button("Buy Capsules", function()
for i=1, capamount do
local args = {
    [1] = capname
}

game:GetService("ReplicatedStorage").Functions.Progress.BuyCapsule:FireServer(unpack(args))
end
DiscordLib:Notification("Notification", "Bought Capsules", "Okay")
end)

local fun = serv:Channel("Fun")

fun:Label("THESE ARE SEEN BY ALL PLAYERS (NOT LOCAL)")

fun:Toggle("Invisible Pets",false, function(toggle)
if toggle == true then
local k = workspace.Pets:GetChildren()
for g=1, #k do
k[g].root.BodyPosition.MaxForce = Vector3.new(0,0,0)
end
else
  local k = workspace.Pets:GetChildren()
for g=1, #k do
k[g].root.BodyPosition.MaxForce = Vector3.new(math.huge,math.huge,math.huge)
end  
end
end)

fun:Toggle("Lag Pets",false, function(toggle)
if toggle == true then
local k = workspace.Pets:GetChildren()
for g=1, #k do
k[g].root.BodyPosition.D = 0
end
else
local k = workspace.Pets:GetChildren()
for g=1, #k do
k[g].root.BodyPosition.D = 1250
end
end
end)

fun:Toggle("Slow fall pets",false, function(toggle)
if toggle == true then
local k = workspace.Pets:GetChildren()
for g=1, #k do
k[g].root.BodyPosition.P = 0
end
else
local k = workspace.Pets:GetChildren()
for g=1, #k do
k[g].root.BodyPosition.P = 100000
end
end
end)

fun:Toggle("Spinning pets",false, function(toggle)
if toggle == true then
local k = workspace.Pets:GetChildren()
for g=1, #k do
k[g].root.BodyGyro.D = 0
end
else
local k = workspace.Pets:GetChildren()
for g=1, #k do
k[g].root.BodyGyro.D = 500
end
end
end)

local sldr = fun:Slider("Pet Turn Speed", 0, 10000, 0, function(t)
local k = workspace.Pets:GetChildren()
for g=1, #k do
k[g].root.BodyGyro.P = t
end
end)

local upd = serv:Channel("Update-Log")

upd:Label("Fixed Auto Capture")
upd:Label("Made Auto-Farm much faster")

while wait() do
    if capsule == true then
    if enemy ~= nil then
    if model.Parent ~= workspace.Killed then
    modelrarity = model.headGui.Rarity.Text
    end
if model.Parent == workspace.Killed then
if petrar == "All" then
for i=1, capcount do
local args = {
    [1] = capname,
    [2] = enemy.Name
}

game:GetService("ReplicatedStorage").Functions.Combat.UseCapsule:InvokeServer(unpack(args))
end
else
if modelrarity == petrar then
for the=1, capcount do
local args = {
    [1] = capname,
    [2] = enemy.Name
}

game:GetService("ReplicatedStorage").Functions.Combat.UseCapsule:InvokeServer(unpack(args))
end
end
end
end
end
end
if autofarm == true then
local maps = workspace.Map.Areas:GetChildren()
for i=1, #maps do
if (maps[i].Name == mappl) then
map = maps[i]
end
end
local s = map.Spots:GetChildren()
for f=1, #s do
local enemies = workspace.Enemies:GetChildren()
for k=1, #enemies do
if (enemies[k].Name == s[f].Name) then
if petattack == false then
    petattack = true
    
local plr = game.Players.LocalPlayer
plr.Character.HumanoidRootPart.CFrame = CFrame.new(s[f].Position)
wait(1)
local newarg = {
    [1] = s[f].Name
}
game:GetService("ReplicatedStorage").Functions.Combat.SendFighters:FireServer(unpack(newarg))
enemy = s[f]
model = enemies[k]
end
end
end
end
if model ~= nil then
if model.Parent == workspace:WaitForChild("Killed") then
wait(waitamo)
print("BECAMEFALSE")
petattack = false
end
end
end
end
